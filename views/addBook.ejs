<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Add Book</title>
    </head>
    <body>
        <h1>Add Book</h1>
        <form action="/add-book" method="POST">
            <label for="bookId">Book Id:</label>
            <input type="number" id="bookId" name="bookId" required /><br />

            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required /><br />

            <select id="author" name="author" required>
                <!-- Authors will be dynamically populated here --></select><br />

            <label for="isbn">ISBN:</label>
            <input type="text" id="isbn" name="isbn" required /><br />

            <label for="publisher">Publisher:</label>
            <input type="text" id="publisher" name="publisher" required /><br />

            <label for="year">Publishing Year:</label>
            <input type="number" id="pbYear" name="pbYear" required /><br />

            <label for="genre">Genre:</label>
            <select id="genre" name="genre" required>
                <!-- Authors will be dynamically populated here --></select><br />

            <label for="description">Description</label>
            <input type="text" id="description" name="description"
                required /><br />

            <label for="totalCopies">Total Copies</label>
            <input type="number" id="totalCopies" name="totalCopies"
                required /><br />

            <label for="availableCopies">Available Copies</label>
            <input
                type="number"
                id="availableCopies"
                name="availableCopies"
                required /><br />
            <!-- Add other input fields for book information -->
            <button type="submit">Add Book</button>
        </form>
        <button onclick="goBack()">Go Back to Books</button>
        <script>
      // Fetch authors from server and populate dropdown
        fetch("/get-authors")
        .then((response) => response.json())
        .then((authors) => {
          const authorSelect = document.getElementById("author");
          // console.log(authors);
          authors.forEach((author) => {
            const option = document.createElement("option");
            option.value = author;
            option.textContent = author;
            authorSelect.appendChild(option);
          });
        })
        .catch((error) => console.error("Error fetching authors:", error));

      // Fetch genres from server and populate dropdown
      fetch("/get-genres")
        .then((response) => response.json())
        .then((authors) => {
          const genreSelect = document.getElementById("genre");
          // console.log(genres);
          authors.forEach((genre) => {
            const option = document.createElement("option");
            option.value = genre;
            option.textContent = genre;
            genreSelect.appendChild(option);
          });
        })
        .catch((error) => console.error("Error fetching genres:", error));

      function goBack() {
        window.location.href = "/books";
      }
    </script>
    </body>
</html>
